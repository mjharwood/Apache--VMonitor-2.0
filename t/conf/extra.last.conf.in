PerlModule Apache::VMonitor
<IfDefine MODPERL2>
    # 2.0 configuration
    <Location /vmonitor>
        SetHandler perl-script
        PerlResponseHandler Apache::VMonitor
        PerlOptions -GlobalRequest
        PerlOptions -SetupEnv
    </Location>

    <VirtualHost vhost1>
        PerlModule Apache::VMonitor
        <Location /vmonitor>
            SetHandler perl-script
            PerlResponseHandler Apache::VMonitor
            PerlOptions -GlobalRequest
            PerlOptions -SetupEnv
        </Location>
    </VirtualHost>

    <VirtualHost vhost2>
        PerlModule Apache::VMonitor
        <Location /vmonitor>
            SetHandler perl-script
            PerlResponseHandler Apache::VMonitor
            PerlOptions -GlobalRequest
            PerlOptions -SetupEnv
        </Location>
    </VirtualHost>
</IfDefine>


<IfDefine !MODPERL2>
    # 1.0 configuration
    <Location /vmonitor>
        SetHandler perl-script
        PerlHandler Apache::VMonitor
    </Location>

    <VirtualHost vhost1>
        PerlModule Apache::VMonitor
        <Location /vmonitor>
            SetHandler perl-script
            PerlHandler Apache::VMonitor
        </Location>
    </VirtualHost>

    <VirtualHost vhost2>
        PerlModule Apache::VMonitor
        <Location /vmonitor>
            SetHandler perl-script
            PerlHandler Apache::VMonitor
        </Location>
    </VirtualHost>
</IfDefine>

<IfModule mod_status.c>
  ExtendedStatus On
  <Location /server-status>
      SetHandler server-status
  </Location>
</IfModule>
